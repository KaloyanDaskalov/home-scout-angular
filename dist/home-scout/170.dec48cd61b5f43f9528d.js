(self.webpackChunkhome_scout=self.webpackChunkhome_scout||[]).push([[170],{4170:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UserModule:()=>L});var r=i(8583),n=i(3550),a=i(7716),s=i(384);let o=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}get isUser(){return this.authService.isLoggedIn}canActivate(e,t){return this.isUser||this.router.createUrlTree(["/auth/login"])}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.e),a.LFG(n.F0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=i(665),d=i(9976),c=i(552),g=i(7774),m=i(9577);function u(e,t){if(1&e&&(a.TgZ(0,"option",30),a._uU(1),a.ALo(2,"titlecase"),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e),a.xp6(1),a.hij(" ",a.lcZ(2,2,e)," ")}}let p=(()=>{class e{constructor(e,t,i){this.advertisementService=e,this.authService=t,this.globalMessages=i,this.types=["house","flat","office","land"],this.imagePattern=/^https?:\/\//,this.canSubmit=!1,this.faHome=d.J9Y,this.faDollarSign=d.egO,this.faImage=d.VmB,this.faMap=d.Wx7,this.faInfoCircle=d.sqG}get currentUser(){return this.authService.getCurrentUser}ngOnInit(){this.formData=new l.cw({title:new l.NI(null,[l.kI.required,l.kI.minLength(5),l.kI.maxLength(50)]),price:new l.NI(null,[l.kI.required,l.kI.min(1),l.kI.max(5e6)]),imageUrl:new l.NI(null,[l.kI.required,this.checkImage.bind(this)]),address:new l.NI(null,[l.kI.required,l.kI.minLength(5),l.kI.maxLength(50)]),type:new l.NI(null,[l.kI.required]),description:new l.NI(null,[l.kI.required,l.kI.minLength(20),l.kI.maxLength(500)])}),this.formData.statusChanges.subscribe(e=>{"VALID"===e&&(this.canSubmit=!0)})}checkImage(e){return this.imagePattern.test(e.value)?null:{invalidImageUrl:!0}}onSubmit(){var e,t;!this.formData.invalid&&this.currentUser&&(this.data=Object.assign(Object.assign({},this.formData.value),{author:null===(e=this.currentUser)||void 0===e?void 0:e.email,authorId:null===(t=this.currentUser)||void 0===t?void 0:t.uid}),this.advertisementService.create(this.data).then(()=>{this.formData.reset(),this.globalMessages.isMessage.next({message:"New advertisement created",type:"bg-success"})}))}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.D),a.Y36(s.e),a.Y36(g.H))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-create"]],decls:53,vars:9,consts:[[1,"custom-form"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-lg-12","col-xl-11"],[1,"card","text-black",2,"border-radius","25px"],[1,"card-body","p-md-5"],[1,"row","justify-content-center"],[1,"col-md-10","col-lg-6","col-xl-5","order-2","order-lg-1"],[1,"text-center","h1","fw-bold","mb-5","mx-1","mx-md-4","mt-4"],[1,"mx-1","mx-md-4",3,"formGroup","ngSubmit"],[1,"d-flex","flex-row","align-items-center","mb-4"],[1,"fa-lg","me-3","fa-fw",3,"icon"],[1,"form-floating","flex-fill","mb-0"],["type","text","id","title","placeholder","Title","formControlName","title",1,"form-control"],["for","title",1,"form-label"],["type","number","id","price","placeholder","Price","formControlName","price",1,"form-control"],["for","price",1,"form-label"],["type","text","id","imageUrl","placeholder","Image Url","formControlName","imageUrl",1,"form-control"],["for","imageUrl",1,"form-label"],["type","text","id","address","placeholder","Address","formControlName","address",1,"form-control"],["for","address",1,"form-label"],["id","type","aria-label","Select-type","formControlName","type",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","type",1,"label"],["id","description","placeholder","Description","formControlName","description",1,"form-control",2,"height","7rem"],["for","description",1,"floatingTextarea"],[1,"d-flex","justify-content-center","mx-4","mb-3","mb-lg-4"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"col-lg-6","col-xl-7","d-none","d-lg-flex","align-items-center","order-1","order-lg-2"],["src","../../assets/hs.svg","alt","Site Logo",1,"img-fluid"],[3,"value"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a.TgZ(5,"div",5),a.TgZ(6,"div",6),a.TgZ(7,"div",7),a.TgZ(8,"p",8),a._uU(9," Create "),a.qZA(),a.TgZ(10,"form",9),a.NdJ("ngSubmit",function(){return t.onSubmit()}),a.TgZ(11,"div",10),a._UZ(12,"fa-icon",11),a.TgZ(13,"div",12),a._UZ(14,"input",13),a.TgZ(15,"label",14),a._uU(16,"Title"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",10),a._UZ(18,"fa-icon",11),a.TgZ(19,"div",12),a._UZ(20,"input",15),a.TgZ(21,"label",16),a._uU(22,"Price"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"div",10),a._UZ(24,"fa-icon",11),a.TgZ(25,"div",12),a._UZ(26,"input",17),a.TgZ(27,"label",18),a._uU(28,"Image URL"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"div",10),a._UZ(30,"fa-icon",11),a.TgZ(31,"div",12),a._UZ(32,"input",19),a.TgZ(33,"label",20),a._uU(34,"Address "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(35,"div",10),a._UZ(36,"fa-icon",11),a.TgZ(37,"div",12),a.TgZ(38,"select",21),a.YNc(39,u,3,4,"option",22),a.qZA(),a.TgZ(40,"label",23),a._uU(41,"Type"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(42,"div",10),a._UZ(43,"fa-icon",11),a.TgZ(44,"div",12),a._UZ(45,"textarea",24),a.TgZ(46,"label",25),a._uU(47,"Description"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(48,"div",26),a.TgZ(49,"button",27),a._uU(50," Create "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(51,"div",28),a._UZ(52,"img",29),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(10),a.Q6J("formGroup",t.formData),a.xp6(2),a.Q6J("icon",t.faHome),a.xp6(6),a.Q6J("icon",t.faDollarSign),a.xp6(6),a.Q6J("icon",t.faImage),a.xp6(6),a.Q6J("icon",t.faMap),a.xp6(6),a.Q6J("icon",t.faHome),a.xp6(3),a.Q6J("ngForOf",t.types),a.xp6(4),a.Q6J("icon",t.faInfoCircle),a.xp6(6),a.Q6J("disabled",!t.canSubmit))},directives:[l._Y,l.JL,l.sg,m.BN,l.Fj,l.JJ,l.u,l.wV,l.EJ,r.sg,l.YN,l.Kr],pipes:[r.rS],styles:[""]}),e})();var Z=i(8002),f=i(6845);let v=(()=>{class e{constructor(e,t){this.advertisementService=e,this.loaderService=t,this.faMapMarkerAlt=d.FGq,this.faEuroSign=d.QU_,this.faHome=d.J9Y}onDelete(e){this.loaderService.isLoading.next(!0),this.advertisementService.delete(e).then(),this.loaderService.isLoading.next(!1)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.D),a.Y36(f.D))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-my-card"]],inputs:{advertisementCard:"advertisementCard"},decls:43,vars:14,consts:[[1,"card"],["alt","image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"custom-card-title"],[1,"card-title"],[3,"icon"],[1,"custom-price"],[1,"card-text"],[1,"d-flex","justify-content-between"],[1,"btn","btn-success","btn-lg",3,"routerLink"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-danger","btn-lg"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content","text-center"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a._UZ(1,"img",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h3",4),a._uU(5),a.qZA(),a.TgZ(6,"p"),a._UZ(7,"fa-icon",5),a.TgZ(8,"strong"),a._uU(9),a.ALo(10,"titlecase"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"address"),a._UZ(12,"fa-icon",5),a.TgZ(13,"em"),a._uU(14),a.qZA(),a.qZA(),a.TgZ(15,"h5",6),a._UZ(16,"fa-icon",5),a._uU(17),a.qZA(),a.TgZ(18,"p",7),a._uU(19),a.qZA(),a.TgZ(20,"p",4),a._uU(21," Author: "),a.TgZ(22,"strong"),a._uU(23),a.qZA(),a.qZA(),a.TgZ(24,"div",8),a.TgZ(25,"a",9),a._uU(26,"Edit"),a.qZA(),a.TgZ(27,"button",10),a._uU(28," Delete "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"div",11),a.TgZ(30,"div",12),a.TgZ(31,"div",13),a.TgZ(32,"div",14),a.TgZ(33,"h5",15),a._uU(34," Permanently delete advertisement? "),a.qZA(),a._UZ(35,"button",16),a.qZA(),a.TgZ(36,"div",17),a._uU(37),a.qZA(),a.TgZ(38,"div",18),a.TgZ(39,"button",19),a._uU(40," Close "),a.qZA(),a.TgZ(41,"button",20),a.NdJ("click",function(){return t.onDelete(t.advertisementCard.id)}),a._uU(42," Confirm "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(1),a.Q6J("src",t.advertisementCard.imageUrl,a.LSH),a.xp6(4),a.Oqu(t.advertisementCard.title),a.xp6(2),a.Q6J("icon",t.faHome),a.xp6(2),a.hij(" ",a.lcZ(10,12,t.advertisementCard.type),""),a.xp6(3),a.Q6J("icon",t.faMapMarkerAlt),a.xp6(2),a.hij(" ",t.advertisementCard.address,""),a.xp6(2),a.Q6J("icon",t.faEuroSign),a.xp6(1),a.hij(" ",t.advertisementCard.price," "),a.xp6(2),a.hij(" ",t.advertisementCard.description," "),a.xp6(4),a.Oqu(t.advertisementCard.author),a.xp6(2),a.MGl("routerLink","/advertisement/edit/",t.advertisementCard.id,""),a.xp6(12),a.hij(" ",t.advertisementCard.title," "))},directives:[m.BN,n.yS],pipes:[r.rS],styles:[""]}),e})();function h(e,t){if(1&e&&(a.TgZ(0,"div",5),a._UZ(1,"app-my-card",6),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("advertisementCard",e)}}function b(e,t){if(1&e&&(a.TgZ(0,"div",3),a.YNc(1,h,2,1,"div",4),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngForOf",e.advertisements)}}function A(e,t){1&e&&(a.TgZ(0,"div",7),a.TgZ(1,"div",0),a.TgZ(2,"div",8),a.TgZ(3,"div",9),a.TgZ(4,"span",10),a._uU(5,"No Advertisements found"),a.qZA(),a._UZ(6,"br"),a.TgZ(7,"a",11),a._uU(8," Create "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA())}let q=(()=>{class e{constructor(e,t,i){this.advertisementService=e,this.authService=t,this.loaderService=i,this.advertisements=[]}get currentUser(){return this.authService.getCurrentUser}ngOnInit(){var e;this.retrieveMyAdvertisements(null===(e=this.currentUser)||void 0===e?void 0:e.uid)}retrieveMyAdvertisements(e=""){this.loaderService.isLoading.next(!0),this.advertisementService.getByChild("authorId",e).snapshotChanges().pipe((0,Z.U)(e=>e.map(e=>Object.assign({id:e.payload.key},e.payload.val())))).subscribe(e=>{this.advertisements=e,this.loaderService.isLoading.next(!1)})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.D),a.Y36(s.e),a.Y36(f.D))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-my-advertisements"]],decls:4,vars:2,consts:[[1,"container"],["class","row",4,"ngIf","ngIfElse"],["noAdvertisements",""],[1,"row"],["class","col-sm-6 col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-6","col-lg-4","mb-4"],[3,"advertisementCard"],[1,"page-wrap","d-flex","flex-row","align-items-center"],[1,"row","justify-content-center"],[1,"col-md-12","text-center"],[1,"display-1","d-block"],["routerLink","/advertisement/create",1,"btn","btn-outline-success","btn-lg"]],template:function(e,t){if(1&e&&(a.TgZ(0,"div",0),a.YNc(1,b,2,1,"div",1),a.YNc(2,A,9,0,"ng-template",null,2,a.W1O),a.qZA()),2&e){const e=a.MAs(3);a.xp6(1),a.Q6J("ngIf",t.advertisements.length>0)("ngIfElse",e)}},directives:[r.O5,r.sg,v,n.yS],styles:[""]}),e})();function x(e,t){if(1&e&&(a.TgZ(0,"option",30),a._uU(1),a.ALo(2,"titlecase"),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e),a.xp6(1),a.hij(" ",a.lcZ(2,2,e)," ")}}let T=(()=>{class e{constructor(e,t,i,r,n,a){this.activatedRoute=e,this.advertisementService=t,this.router=i,this.formBuilder=r,this.loaderService=n,this.globalMessages=a,this.types=["house","flat","office","land"],this.imagePattern=/^https?:\/\//,this.faHome=d.J9Y,this.faDollarSign=d.egO,this.faImage=d.VmB,this.faMap=d.Wx7,this.faInfoCircle=d.sqG}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id||"",this.formData=this.formBuilder.group({title:["",[l.kI.required,l.kI.minLength(5),l.kI.maxLength(50)]],price:["",[l.kI.required,l.kI.min(1),l.kI.max(5e6)]],imageUrl:["",[l.kI.required,this.checkImage.bind(this)]],address:["",[l.kI.required,l.kI.minLength(5),l.kI.maxLength(50)]],type:["",[l.kI.required]],description:["",[l.kI.required,l.kI.minLength(20),l.kI.maxLength(500)]]}),this.retrieveMyAdvertisement(this.id)}retrieveMyAdvertisement(e){this.loaderService.isLoading.next(!0),this.advertisementService.getOne(e).snapshotChanges().pipe((0,Z.U)(e=>Object.assign({id:e.payload.key},e.payload.val()))).subscribe(e=>{const{title:t,price:i,imageUrl:r,address:n,type:a,description:s}=e;this.loaderService.isLoading.next(!1),this.formData.patchValue({title:t,price:i,imageUrl:r,address:n,type:a,description:s})})}onSubmit(){if(this.formData.invalid)return;const{title:e,price:t,imageUrl:i,address:r,type:n,description:a}=this.formData.value;this.advertisementService.getOne(this.id).update({title:e,price:t,imageUrl:i,address:r,type:n,description:a}).then(()=>{this.globalMessages.isMessage.next({message:e+" was updated",type:"bg-success"}),this.router.navigate(["/advertisement/my-advertisements"])}).catch(e=>this.globalMessages.isMessage.next({message:e.message,type:"bg-danger"}))}checkImage(e){return this.imagePattern.test(e.value)?null:{invalidImageUrl:!0}}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(n.gz),a.Y36(c.D),a.Y36(n.F0),a.Y36(l.qu),a.Y36(f.D),a.Y36(g.H))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-edit"]],decls:53,vars:9,consts:[[1,"custom-form"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-lg-12","col-xl-11"],[1,"card","text-black",2,"border-radius","25px"],[1,"card-body","p-md-5"],[1,"row","justify-content-center"],[1,"col-md-10","col-lg-6","col-xl-5","order-2","order-lg-1"],[1,"text-center","h1","fw-bold","mb-5","mx-1","mx-md-4","mt-4"],[1,"mx-1","mx-md-4",3,"formGroup","ngSubmit"],[1,"d-flex","flex-row","align-items-center","mb-4"],[1,"fa-lg","me-3","fa-fw",3,"icon"],[1,"form-floating","flex-fill","mb-0"],["type","text","id","title","placeholder","Title","formControlName","title","name","title","value","",1,"form-control"],["for","title",1,"form-label"],["type","number","id","price","placeholder","Price","formControlName","price","name","price",1,"form-control"],["for","price",1,"form-label"],["type","text","id","imageUrl","placeholder","Image Url","formControlName","imageUrl","name","imageUrl",1,"form-control"],["for","imageUrl",1,"form-label"],["type","text","id","address","placeholder","Address","formControlName","address","name","address",1,"form-control"],["for","address",1,"form-label"],["id","type","aria-label","Select-type","formControlName","type","name","type",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","type",1,"label"],["id","description","placeholder","Description","formControlName","description","name","description",1,"form-control",2,"height","7rem"],["for","description",1,"floatingTextarea"],[1,"d-flex","justify-content-center","mx-4","mb-3","mb-lg-4"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"col-lg-6","col-xl-7","d-none","d-lg-flex","align-items-center","order-1","order-lg-2"],["src","../../assets/hs.svg","alt","Site Logo",1,"img-fluid"],[3,"value"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a.TgZ(5,"div",5),a.TgZ(6,"div",6),a.TgZ(7,"div",7),a.TgZ(8,"p",8),a._uU(9," Edit "),a.qZA(),a.TgZ(10,"form",9),a.NdJ("ngSubmit",function(){return t.onSubmit()}),a.TgZ(11,"div",10),a._UZ(12,"fa-icon",11),a.TgZ(13,"div",12),a._UZ(14,"input",13),a.TgZ(15,"label",14),a._uU(16,"Title"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",10),a._UZ(18,"fa-icon",11),a.TgZ(19,"div",12),a._UZ(20,"input",15),a.TgZ(21,"label",16),a._uU(22,"Price"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"div",10),a._UZ(24,"fa-icon",11),a.TgZ(25,"div",12),a._UZ(26,"input",17),a.TgZ(27,"label",18),a._uU(28,"Image URL"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"div",10),a._UZ(30,"fa-icon",11),a.TgZ(31,"div",12),a._UZ(32,"input",19),a.TgZ(33,"label",20),a._uU(34,"Address "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(35,"div",10),a._UZ(36,"fa-icon",11),a.TgZ(37,"div",12),a.TgZ(38,"select",21),a.YNc(39,x,3,4,"option",22),a.qZA(),a.TgZ(40,"label",23),a._uU(41,"Type"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(42,"div",10),a._UZ(43,"fa-icon",11),a.TgZ(44,"div",12),a._UZ(45,"textarea",24),a.TgZ(46,"label",25),a._uU(47,"Description"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(48,"div",26),a.TgZ(49,"button",27),a._uU(50," Update "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(51,"div",28),a._UZ(52,"img",29),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(10),a.Q6J("formGroup",t.formData),a.xp6(2),a.Q6J("icon",t.faHome),a.xp6(6),a.Q6J("icon",t.faDollarSign),a.xp6(6),a.Q6J("icon",t.faImage),a.xp6(6),a.Q6J("icon",t.faMap),a.xp6(6),a.Q6J("icon",t.faHome),a.xp6(3),a.Q6J("ngForOf",t.types),a.xp6(4),a.Q6J("icon",t.faInfoCircle),a.xp6(6),a.Q6J("disabled",!t.formData.valid))},directives:[l._Y,l.JL,l.sg,m.BN,l.Fj,l.JJ,l.u,l.wV,l.EJ,r.sg,l.YN,l.Kr],pipes:[r.rS],styles:[""]}),e})();function U(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",12),a.TgZ(1,"input",13,14),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().form.email=t}),a.qZA(),a.TgZ(3,"label",15),a._uU(4,"Email address"),a.qZA(),a._UZ(5,"br"),a.TgZ(6,"button",16),a.NdJ("click",function(){return a.CHM(e),a.oxw().onEmailChange()}),a._uU(7," Change "),a.qZA(),a.qZA()}if(2&e){const e=a.MAs(2),t=a.oxw();a.xp6(1),a.Q6J("ngModel",t.form.email),a.xp6(5),a.Q6J("disabled",!e.valid)}}function y(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",12),a.TgZ(1,"input",17,18),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().form.password=t}),a.qZA(),a.TgZ(3,"label",19),a._uU(4,"Password"),a.qZA(),a._UZ(5,"br"),a.TgZ(6,"button",16),a.NdJ("click",function(){return a.CHM(e),a.oxw().onPasswordChange()}),a._uU(7," Change "),a.qZA(),a.qZA()}if(2&e){const e=a.MAs(2),t=a.oxw();a.xp6(1),a.Q6J("ngModel",t.form.password),a.xp6(5),a.Q6J("disabled",!e.valid)}}function _(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"p",20),a._uU(2,"Are you sure ?"),a.qZA(),a.TgZ(3,"button",21),a.NdJ("click",function(){return a.CHM(e),a.oxw().onCancelDelete()}),a._uU(4," Cancel "),a.qZA(),a.TgZ(5,"span",22),a._uU(6,"|"),a.qZA(),a.TgZ(7,"button",8),a.NdJ("click",function(){return a.CHM(e),a.oxw().onConfirmDelete()}),a._uU(8," Confirm "),a.qZA(),a.qZA()}}let C=(()=>{class e{constructor(e,t){this.authService=e,this.router=t,this.option="",this.form={email:"",password:""}}get currentUser(){return this.authService.getCurrentUser}onOptionChange(e){this.option=e}onEmailChange(){this.currentUser&&this.currentUser.updateEmail(this.form.email).then(e=>this.authService.SignOut())}onPasswordChange(){this.currentUser&&this.currentUser.updatePassword(this.form.password).then(e=>this.authService.SignOut())}onCancelDelete(){return this.option=""}onConfirmDelete(){this.currentUser&&(this.currentUser.delete().then(e=>this.option=""),this.router.navigate(["/advertisements"]))}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.e),a.Y36(n.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-profile"]],decls:28,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-md-6","img"],["src","../../../assets/default-profile-img.png","alt","profile image",1,"img-rounded"],[1,"col-md-6","details"],[1,"text-muted"],[1,"profile-btn"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[3,"ngSwitch"],["class","form-floating mb-3",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"form-floating","mb-3"],["type","text","id","email","placeholder","name@example.com","name","email","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email"],["type","button",1,"btn","btn-primary","btn-lg",3,"disabled","click"],["type","password","id","password","placeholder","********","name","password","required","","minlength","6","maxlength","15",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["for","password"],[1,"alert-danger","h3","mb-3","p-3"],["type","button",1,"btn","btn-primary","mr-3",3,"click"],[1,"delimiter"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a._UZ(3,"img",3),a.qZA(),a.TgZ(4,"div",4),a.TgZ(5,"blockquote"),a.TgZ(6,"h5"),a._uU(7),a.qZA(),a.TgZ(8,"p"),a._uU(9),a.qZA(),a.qZA(),a._UZ(10,"hr"),a.TgZ(11,"div",0),a.TgZ(12,"h5"),a._uU(13," User Settings "),a._UZ(14,"br"),a.TgZ(15,"small",5),a._uU(16,"Email, Password..."),a.qZA(),a.qZA(),a.TgZ(17,"div",6),a.TgZ(18,"button",7),a.NdJ("click",function(){return t.onOptionChange("email")}),a._uU(19," Email "),a.qZA(),a.TgZ(20,"button",7),a.NdJ("click",function(){return t.onOptionChange("password")}),a._uU(21," Password "),a.qZA(),a.TgZ(22,"button",8),a.NdJ("click",function(){return t.onOptionChange("delete")}),a._uU(23," Delete "),a.qZA(),a.qZA(),a.ynx(24,9),a.YNc(25,U,8,2,"div",10),a.YNc(26,y,8,2,"div",10),a.YNc(27,_,9,0,"div",11),a.BQk(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(7),a.hij("username: ",null==t.currentUser?null:t.currentUser.displayName,""),a.xp6(2),a.hij("email: ",null==t.currentUser?null:t.currentUser.email,""),a.xp6(15),a.Q6J("ngSwitch",t.option),a.xp6(1),a.Q6J("ngSwitchCase","email"),a.xp6(1),a.Q6J("ngSwitchCase","password"),a.xp6(1),a.Q6J("ngSwitchCase","delete"))},directives:[r.RF,r.n9,l.Fj,l.Q7,l.on,l.JJ,l.On,l.wO,l.nD],styles:[".container[_ngcontent-%COMP%]{padding:5%}.img-rounded[_ngcontent-%COMP%]{display:block;width:100%}.container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{border-left:3px solid #ded4da}.container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.profile-btn[_ngcontent-%COMP%]{margin:2rem 0;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:1rem;gap:1rem}.delimiter[_ngcontent-%COMP%]{padding:0 .5rem}@media only screen and (min-width:576px){.profile-btn[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}"]}),e})();var w=i(5257),S=i(9219);function I(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",5),a.TgZ(1,"app-card",6),a.NdJ("addToFavorites",function(t){return a.CHM(e),a.oxw(2).onFavoritesEmit(t)}),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.Q6J("advertisementCard",e)}}function M(e,t){if(1&e&&(a.TgZ(0,"div",3),a.YNc(1,I,2,1,"div",4),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngForOf",e.advertisements)}}function k(e,t){1&e&&(a.TgZ(0,"div",7),a.TgZ(1,"div",0),a.TgZ(2,"div",8),a.TgZ(3,"div",9),a.TgZ(4,"span",10),a._uU(5,"No Favorites"),a.qZA(),a._UZ(6,"br"),a.TgZ(7,"a",11),a._uU(8," Home "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA())}const J=[{path:"",children:[{path:"",redirectTo:"/advertisements",pathMatch:"full"},{path:"create",canActivate:[o],component:p},{path:"edit/:id",canActivate:[o],component:T},{path:"my-advertisements",canActivate:[o],component:q},{path:"my-favorites",canActivate:[o],component:(()=>{class e{constructor(e,t,i,r,n){this.advertisementService=e,this.authService=t,this.router=i,this.loaderService=r,this.globalMessages=n,this.advertisements=[]}get currentUser(){return this.authService.getCurrentUser}ngOnInit(){var e;this.currentUser&&this.retrieveFavorites(null===(e=this.currentUser)||void 0===e?void 0:e.uid)}retrieveFavorites(e){this.loaderService.isLoading.next(!0),this.sub=this.advertisementService.getAll().snapshotChanges().pipe((0,Z.U)(e=>e.map(e=>Object.assign({id:e.key},e.payload.val())))).subscribe(t=>{this.advertisements=t.filter(t=>t.favorites&&!0===t.favorites[e]),this.loaderService.isLoading.next(!1)})}onFavoritesEmit(e){if(!this.currentUser)return this.globalMessages.isMessage.next({message:"You must be logged in to perform this action",type:"bg-danger"}),void this.router.navigate(["/auth/login"]);this.advertisementService.getOne(e).valueChanges().pipe((0,w.q)(1)).subscribe(t=>{var i;this.loaderService.isLoading.next(!0);const r=t,n=null===(i=this.currentUser)||void 0===i?void 0:i.uid;null!==r&&((null==r?void 0:r.authorId)===n?this.globalMessages.isMessage.next({message:"You can't perform this action on your   advertisement",type:"bg-danger"}):void 0===(null==r?void 0:r.favorites)?(r.favorites={[n]:!0},this.advertisementService.getOne(e).update(r).then(()=>this.globalMessages.isMessage.next({message:"Added to favorites",type:"bg-success"}))):void 0===(null==r?void 0:r.favorites[n])?(r.favorites[n]=!0,this.advertisementService.getOne(e).update(r).then(()=>this.globalMessages.isMessage.next({message:"Added to favorites",type:"bg-success"}))):void 0!==(null==r?void 0:r.favorites[n])&&(1===Object.keys(r.favorites).length?null==r||delete r.favorites:null==r||delete r.favorites[n],this.advertisementService.getOne(e).set(r).then(()=>this.globalMessages.isMessage.next({message:"Removed from favorites",type:"bg-warning"})))),this.loaderService.isLoading.next(!1)})}ngOnDestroy(){this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.D),a.Y36(s.e),a.Y36(n.F0),a.Y36(f.D),a.Y36(g.H))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-my-favorites"]],decls:4,vars:2,consts:[[1,"container"],["class","row",4,"ngIf","ngIfElse"],["noAdvertisements",""],[1,"row"],["class","col-sm-6 col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-6","col-lg-4","mb-4"],[3,"advertisementCard","addToFavorites"],[1,"page-wrap","d-flex","flex-row","align-items-center"],[1,"row","justify-content-center"],[1,"col-md-12","text-center"],[1,"display-1","d-block"],["routerLink","/advertisements",1,"btn","btn-outline-success","btn-lg"]],template:function(e,t){if(1&e&&(a.TgZ(0,"div",0),a.YNc(1,M,2,1,"div",1),a.YNc(2,k,9,0,"ng-template",null,2,a.W1O),a.qZA()),2&e){const e=a.MAs(3);a.xp6(1),a.Q6J("ngIf",t.advertisements.length>0)("ngIfElse",e)}},directives:[r.O5,r.sg,S.A,n.yS],styles:[""]}),e})()},{path:"my-profile",canActivate:[o],component:C}]}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.Bz.forChild(J)],n.Bz]}),e})();var O=i(4466);let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[r.ez,N,l.UX,l.u5,m.uH,O.m]]}),e})()}}]);